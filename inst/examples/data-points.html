<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <title>paco</title>

    <link href="points/external/clickme_points.css" rel="stylesheet">
<link href="points/external/bootstrap-tooltip.css" rel="stylesheet">
<script src="points/external/d3.v3.js"></script>
<script src="points/external/d3_aux.js"></script>
<script src="points/external/jquery.min.js"></script>
<script src="points/external/bootstrap-tooltip.v2_3.js"></script>

  </head>

  <body>
    <script type="text/javascript">
    (function() {
      var circles, clip, color_scale, data, decimal_format, names, names_button, plot, radius, redraw, toggle_names, toggle_names_button, transform;
    
      decimal_format = d3.format(".2f");
    
      data = [
        {
          "x": 1,
          "y": 1,
          ".name": "1"
        }, {
          "x": 2,
          "y": 2,
          ".name": "2"
        }, {
          "x": 3,
          "y": 3,
          ".name": "3"
        }, {
          "x": 4,
          "y": 4,
          ".name": "4"
        }, {
          "x": 5,
          "y": 5,
          ".name": "5"
        }, {
          "x": 6,
          "y": 6,
          ".name": "6"
        }, {
          "x": 7,
          "y": 7,
          ".name": "7"
        }, {
          "x": 8,
          "y": 8,
          ".name": "8"
        }, {
          "x": 9,
          "y": 9,
          ".name": "9"
        }, {
          "x": 10,
          "y": 10,
          ".name": "10"
        }
      ];
    
      plot = append_plot({
        width: 980,
        height: 980,
        margin: {
          "top": 80,
          "right": 150,
          "bottom": 30,
          "left": 100
        }
      });
    
      plot.scales.x.domain([1, 10]);
    
      plot.scales.x = add_scale_padding(plot.scales.x);
    
      plot.scales.y.domain([1, 10]);
    
      plot.scales.y = add_scale_padding(plot.scales.y);
    
      radius = 5;
    
      color_scale = d3.scale.ordinal().range(["#000"]);
    
      plot.append("defs").append("clipPath").attr("id", "clip").append("rect").attr("width", plot.width).attr("height", plot.height);
    
      clip = plot.append("g").attr("clip-path", "url(#clip)");
    
      transform = function(d) {
        return "translate(" + (plot.scales.x(d.x)) + "," + (plot.scales.y(d.y)) + ")";
      };
    
      clip.append("rect").attr({
        "class": "overlay",
        "width": plot.width,
        "height": plot.height,
        "fill": "none",
        "pointer-events": "all"
      }).style("cursor", "move").call(d3.behavior.zoom().x(plot.scales.x).y(plot.scales.y).scaleExtent([1, Infinity]).on("zoom", function() {
        return redraw();
      }));
    
      circles = clip.selectAll("circle").data(data).enter().append("svg:circle").attr({
        "r": radius,
        "title": function(d) {
          return "<strong>" + d[".name"] + "</strong><br>x: " + (decimal_format(d.x)) + "<br>y: " + (decimal_format(d.y));
        },
        "class": "circle_tooltip",
        "transform": transform,
        "fill": function(d) {
          return color_scale(d[".color_group"]);
        }
      });
    
      names = clip.selectAll("text").data(data, function(d) {
        return d[".name"];
      }).enter().append("text").text(function(d) {
        return d[".name"];
      }).attr({
        "dy": ".32em",
        "dx": "8",
        "text-anchor": "left",
        "display": "none",
        "transform": transform
      });
    
      plot = draw_axes(plot);
    
      redraw = function() {
        plot.select(".x.axis").call(plot.axes.x);
        plot.select(".y.axis").call(plot.axes.y);
        circles.attr("transform", transform);
        return names.attr("transform", transform);
      };
    
      $(".circle_tooltip").tooltip({
        html: true,
        container: "body",
        placement: "top"
      });
    
      plot.append("text").text("paco").attr({
        "class": "title",
        "text-anchor": "middle",
        "x": plot.width / 2,
        "y": -plot.margin.top / 2
      }).style({
        "font-family": "Rockwell",
        "font-size": 30
      });
    
      plot.append("text").text("").attr({
        "class": "x label",
        "text-anchor": "middle",
        "x": plot.width - plot.width / 2,
        "y": plot.height + plot.margin.bottom / 2,
        "dy": "2em"
      });
    
      plot.append("text").text("").attr({
        "class": "y label",
        "text-anchor": "middle",
        "x": 0 - (plot.height / 2),
        "y": -plot.margin.left + 5,
        "dy": "1em",
        "transform": "rotate(-90)"
      });
    
      names_button = plot.append("g").attr("transform", "translate(" + plot.width + "," + 0 + ")").style("cursor", "pointer").style("font-size", "16px").style("font-family", "Rockwell").on("click", function() {
        return toggle_names();
      });
    
      d3.select(window).on("keydown", function() {
        var _ref;
        if (((_ref = d3.event.keyCode) === 78 || _ref === 32)) {
          return change();
        }
      });
    
      names_button.append("circle").attr("r", 7).attr("stroke", "black").attr("stroke-width", 2);
    
      names_button.append("text").attr('text-anchor', 'start').attr('dy', '.32em').attr('dx', '12');
    
      toggle_names = function() {
        if (names_button.classed("show_names")) {
          names_button.attr("class", "");
          return toggle_names_button();
        } else {
          names_button.attr("class", "show_names");
          return toggle_names_button();
        }
      };
    
      toggle_names_button = function() {
        if (names_button.classed("show_names")) {
          names.attr("display", "inline");
          return names_button.select("circle").attr("fill", "black");
        } else {
          names.attr("display", "none");
          names_button.select("circle").attr("fill", "white");
          return names_button.select("text").text("Show names");
        }
      };
    
      toggle_names_button();
    
    }).call(this);

    </script>
  </body>
</html>
